From b2e2cd90614490aac7450b6e7d05f3d74a355306 Mon Sep 17 00:00:00 2001
From: "Uwe L. Korn" <uwe.korn@quantco.com>
Date: Wed, 27 Sep 2023 17:29:50 +0200
Subject: [PATCH] Use PyUnicode_DATA

---
 leveldb_object.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/leveldb_object.cc b/leveldb_object.cc
index da88d42..34fa4fa 100644
--- a/leveldb_object.cc
+++ b/leveldb_object.cc
@@ -792,7 +792,7 @@ static int pyleveldb_str_eq(PyObject* p, const char* s)
 	// unicode string
 	if (PyUnicode_Check(p)) {
 		size_t i = 0;
-		Py_UNICODE* c = PyUnicode_AS_UNICODE(p);
+		char* c = (char*)PyUnicode_DATA(p);
 
 		while (s[i] && c[i] && (int)s[i] == (int)c[i])
 			i++;
-- 
2.39.3 (Apple Git-145)

